---
description: 
globs: 
alwaysApply: true
---
 Project: uploadzx â€” Browser Upload Library (Tus Integration)
ğŸ¯ Project Goals
Build a browser-only TypeScript upload library that simplifies file uploads for web apps.

Provide a developer-friendly abstraction over tus-js-client, including:

File selection (input and File System Access API)

Upload progress tracking

Cancel, resume, retry support

Persistent upload state using IndexedDB

Expose a clean, minimal API to:

Manage single and batch uploads

Track per-file upload state

React to lifecycle events (progress, success, failure)

Allow integration with React (future optional module).

Be UI-agnostic â€” the library must not render any UI, only emit/upload state and actions.

ğŸ§± Architecture Rules
ğŸ“ Written in TypeScript, targeting modern browsers (ES2020+).

ğŸ“¦ Use tus-js-client for resumable uploads.

ğŸ’¾ IndexedDB will be used to:

Persist upload progress (tus handles fingerprints automatically)

Store and reuse FileSystemFileHandle objects for reloading file references across page sessions

ğŸ” File permission persistence should be handled via requestPermission() and queryPermission().

ğŸ”Œ Use AbortController for cancelation support.

ğŸ“š The library must not depend on any UI framework.

ğŸ§° Built and bundled via tsup.

âš™ï¸ Key Modules
FilePicker â€” for input and file handle picker

TusUploader â€” wrapper around tus.Upload with events, progress, cancel/resume

UploadQueue â€” manager for multiple uploads, queueing, state tracking

FileHandleStore â€” handles IndexedDB logic for persisting handles


